<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Disponibilidad - Horarios Optimizados</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .header-bg {
            background: linear-gradient(90deg, #1e3a8a, #3b82f6);
        }

        .btn-glow:hover {
            box-shadow: 0 0 15px #3b82f6;
            transform: translateY(-2px);
        }

        .ascii-tag {
            color: #00ffcc;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            text-shadow: 0 0 5px #00ffcc;
            margin-top: 10px;
            opacity: 0.9;
        }

        .grid-horario {
            display: grid;
            grid-template-columns: 80px repeat(5, 1fr);
            font-size: 0.875rem;
        }

        @media (max-width: 768px) {
            .grid-horario {
                grid-template-columns: 60px repeat(5, 1fr);
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
<!-- Header -->
<div class="header-bg p-8 text-white text-center">
    <h1 class="text-4xl md:text-5xl font-bold mb-4 flex justify-center items-center">
        <i class="fas fa-calendar-alt mr-4"></i>
        Sistema de Disponibilidad
    </h1>
    <p class="text-xl opacity-90 max-w-3xl mx-auto">
        Organización de horarios basados en la disponibilidad del profesorado
    </p>
</div>
<div class="container mx-auto px-4 py-8">
    <!-- Import Data Section -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
            <i class="fas fa-file-import mr-3 text-blue-600"></i>Importar Datos de Disponibilidad
        </h2>
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">Subir archivo CSV de disponibilidad</label>
            <input type="file" id="csvFile" accept="document/*, .csv, .xls, .xlsx, .xlsm"
                   class="w-full px-4 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div class="flex flex-wrap gap-4">
            <button id="importBtn"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all duration-300 btn-glow flex items-center">
                <i class="fas fa-upload mr-2"></i>
                Importar Datos
            </button>
            <button id="generarHorarioBtn"
                    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-all duration-300 btn-glow flex items-center">
                <i class="fas fa-magic mr-2"></i>
                Generar Horario Óptimo
            </button>
        </div>
    </div>
    <!-- Two Columns Layout -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Disponibilidad Table -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-user-clock mr-3 text-blue-600"></i>Disponibilidad del Profesorado
            </h2>
            <div class="overflow-x-auto">
                <table id="tablaDisponibilidad" class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                    <tr>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Profesor
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Ciclo
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            8:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            9:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            10:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            11:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            12:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            13:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            14:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            15:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            16:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            17:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            18:00
                        </th>
                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            19:00
                        </th>
                    </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="tablaDisponibilidadBody">
                    <!-- Data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Horario Optimizado -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-calendar-check mr-3 text-blue-600"></i>Horario Optimizado
            </h2>
            <div class="flex gap-2 mb-4 flex-wrap">
                <button id="filtrarTodosBtn"
                        class="bg-gray-200 text-gray-800 px-3 py-1 rounded-md hover:bg-gray-300 text-sm transition-all duration-200">
                    Todos
                </button>
                <select id="filtroCiclo"
                        class="border border-gray-300 rounded-md text-sm px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200">
                    <option value="">Todos los ciclos</option>
                </select>
            </div>
            <div class="overflow-x-auto">
                <div class="overflow-x-auto">
                    <div id="horarioOptimizado" class="grid-horario gap-1 mb-6">
                        <div class="bg-blue-100 p-2 text-center font-medium text-blue-800">Hora</div>
                        <div class="bg-blue-100 p-2 text-center font-medium text-blue-800">Lunes</div>
                        <div class="bg-blue-100 p-2 text-center font-medium text-blue-800">Martes</div>
                        <div class="bg-blue-100 p-2 text-center font-medium text-blue-800">Miércoles</div>
                        <div class="bg-blue-100 p-2 text-center font-medium text-blue-800">Jueves</div>
                        <div class="bg-blue-100 p-2 text-center font-medium text-blue-800">Viernes</div>
                        <!-- 8:00 -->
                        <div class="bg-gray-100 p-2 text-center">8:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-8"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-8"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-8"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-8"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-8"></div>
                        <!-- 9:00 -->
                        <div class="bg-gray-100 p-2 text-center">9:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-9"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-9"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-9"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-9"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-9"></div>
                        <!-- 10:00 -->
                        <div class="bg-gray-100 p-2 text-center">10:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-10"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-10"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-10"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-10"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-10"></div>
                        <!-- 11:00 -->
                        <div class="bg-gray-100 p-2 text-center">11:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-11"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-11"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-11"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-11"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-11"></div>
                        <!-- 12:00 -->
                        <div class="bg-gray-100 p-2 text-center">12:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-12"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-12"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-12"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-12"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-12"></div>
                        <!-- 13:00 -->
                        <div class="bg-gray-100 p-2 text-center">13:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-13"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-13"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-13"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-13"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-13"></div>
                        <!-- 14:00 -->
                        <div class="bg-gray-100 p-2 text-center">14:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-14"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-14"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-14"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-14"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-14"></div>
                        <!-- 15:00 -->
                        <div class="bg-gray-100 p-2 text-center">15:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-15"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-15"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-15"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-15"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-15"></div>
                        <!-- 16:00 -->
                        <div class="bg-gray-100 p-2 text-center">16:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-16"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-16"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-16"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-16"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-16"></div>
                        <!-- 17:00 -->
                        <div class="bg-gray-100 p-2 text-center">17:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-17"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-17"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-17"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-17"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-17"></div>
                        <!-- 18:00 -->
                        <div class="bg-gray-100 p-2 text-center">18:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-18"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-18"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-18"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-18"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-18"></div>
                        <!-- 19:00 -->
                        <div class="bg-gray-100 p-2 text-center">19:00</div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="lun-19"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mar-19"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="mie-19"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="jue-19"></div>
                        <div class="bg-white p-2 text-center border border-gray-200" id="vie-19"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt-4">
            <button id="exportarBtn"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all duration-300 btn-glow flex items-center">
                <i class="fas fa-file-export mr-2"></i>
                Exportar Horario
            </button>
        </div>
    </div>
</div>
<!-- Statistics Section -->
<div class="mt-8 bg-white rounded-xl shadow-lg p-6">
    <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
        <i class="fas fa-chart-bar mr-3 text-blue-600"></i>Estadísticas de Optimización
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
            <h3 class="text-lg font-medium text-blue-800 mb-2 flex items-center">
                <i class="fas fa-smile mr-2"></i>Nivel de Satisfacción
            </h3>
            <p class="text-2xl font-bold text-blue-900" id="nivelSatisfaccion">-</p>
            <p class="text-sm text-blue-700">Porcentaje de preferencias satisfechas</p>
        </div>
        <div class="bg-green-50 p-4 rounded-lg border border-green-100">
            <h3 class="text-lg font-medium text-green-800 mb-2 flex items-center">
                <i class="fas fa-clipboard-check mr-2"></i>Horarios Cubiertos
            </h3>
            <p class="text-2xl font-bold text-green-900" id="horariosCubiertos">-</p>
            <p class="text-sm text-green-700">Total de franjas horarias asignadas</p>
        </div>
        <div class="bg-purple-50 p-4 rounded-lg border border-purple-100">
            <h3 class="text-lg font-medium text-purple-800 mb-2 flex items-center">
                <i class="fas fa-users mr-2"></i>Distribución de Ciclos
            </h3>
            <p class="text-2xl font-bold text-purple-900" id="distribucionCiclos">-</p>
            <p class="text-sm text-purple-700">Asignaciones por ciclo formativo</p>
        </div>
    </div>
</div>
</div>
<!-- Footer -->
<div class="bg-gray-50 p-6 text-center text-gray-500 border-t border-gray-200 mt-8">
    <p>© 2024 Sistema de Disponibilidad. Todos los derechos reservados.</p>
</div>
<!-- ASCII signature at the bottom -->
<div class="text-center p-4">
         <pre class="ascii-tag text-xs inline-block text-left">
         ██████╗  █████╗ ██████╗ ██╗      ██████╗
         ██╔══██╗██╔══██╗██╔══██╗██║     ██╔═══██╗
         ██████╔╝███████║██████╔╝██║     ██║   ██║
         ██╔═══╝ ██╔══██║██╔══██╗██║     ██║   ██║
         ██║     ██║  ██║██████╔╝███████╗╚██████╔╝
         ╚═╝     ╚═╝  ╚═╝╚═════╝ ╚══════╝ ╚═════╝

                     /\      /\      /\      /\
                    /  \    /  \    /  \    /  \
                   /    \  /    \  /    \  /    \
                  /      \/      \/      \/      \
                 /|      ||      ||      ||      |\
                / |      ||      ||      ||      | \
               /  |      ||      ||      ||      |  \
              /   |      ||      ||      ||      |   \
             /    |      ||      ||      ||      |    \
            /     |______||______||______||______|     \
           /                                            \
          /____________________________________________\
        </pre>
    <p class="text-gray-400 text-sm">Desarrollado por Pablo</p>
</div>
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>